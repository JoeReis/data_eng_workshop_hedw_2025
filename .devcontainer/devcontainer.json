{
	"name": "Data Stack Dev Container",
	"dockerFile": "../Dockerfile",
	"forwardPorts": [
		5432, // PostgreSQL
		8501, // Streamlit
		11434 // Ollama
	],
	"customizations": {
		"vscode": {
			"extensions": [
				"ms-python.python",
				"ms-python.vscode-pylance",
				"ms-azuretools.vscode-docker",
				"mtxr.sqltools",
				"mtxr.sqltools-driver-pg"
			],
			"settings": {
				"python.defaultInterpreterPath": "/usr/local/bin/python",
				"python.linting.enabled": true,
				"python.formatting.provider": "black",
				"editor.formatOnSave": true
			}
		}
	},
	"postCreateCommand": "echo 'source ~/.bashrc' >> ~/.bash_profile",
	"remoteUser": "root",
	"postStartCommand": "bash -c 'service postgresql start; until pg_isready ; do sleep 1; done; if ! pgrep -f ollama; then ollama serve > /tmp/ollama.log 2>&1 & fi'"
}